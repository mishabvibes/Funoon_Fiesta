import{j as e}from"./animations-C7zvLhC6.js";import{f as t,g as r,h as a,u as n,a as s}from"./vendor-D-wlk8X7.js";import{c as o,u as i,U as u,C as l}from"./index-lAmFerv5.js";import{S as d,T as c}from"./trophy-BUDFT8MN.js";import{A as m}from"./award-BQvKcDFb.js";
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=o("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),p=o("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),v=o("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var h,g,x,N,y,b,j,w,A,S,k,C,T,E,I,O,R,M,D,B,G,z,H,Y,L,U,q,F;function P(){if(g)return h;return g=1,h=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}}function _(){if(b)return y;b=1;var e=function(){if(N)return x;N=1;var e="object"==typeof t&&t&&t.Object===Object&&t;return x=e}(),r="object"==typeof self&&self&&self.Object===Object&&self,a=e||r||Function("return this")();return y=a}function $(){if(C)return k;C=1;var e=function(){if(S)return A;S=1;var e=/\s/;return A=function(t){for(var r=t.length;r--&&e.test(t.charAt(r)););return r}}(),t=/^\s+/;return k=function(r){return r?r.slice(0,e(r)+1).replace(t,""):r}}function W(){if(E)return T;E=1;var e=_().Symbol;return T=e}function Z(){if(B)return D;B=1;var e=W(),t=function(){if(O)return I;O=1;var e=W(),t=Object.prototype,r=t.hasOwnProperty,a=t.toString,n=e?e.toStringTag:void 0;return I=function(e){var t=r.call(e,n),s=e[n];try{e[n]=void 0;var o=!0}catch(u){}var i=a.call(e);return o&&(t?e[n]=s:delete e[n]),i}}(),r=function(){if(M)return R;M=1;var e=Object.prototype.toString;return R=function(t){return e.call(t)}}(),a=e?e.toStringTag:void 0;return D=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?t(e):r(e)}}function J(){if(Y)return H;Y=1;var e=Z(),t=z?G:(z=1,G=function(e){return null!=e&&"object"==typeof e});return H=function(r){return"symbol"==typeof r||t(r)&&"[object Symbol]"==e(r)}}const K=r(function(){if(F)return q;F=1;var e=P(),t=function(){if(w)return j;w=1;var e=_();return j=function(){return e.Date.now()}}(),r=function(){if(U)return L;U=1;var e=$(),t=P(),r=J(),a=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;return L=function(i){if("number"==typeof i)return i;if(r(i))return NaN;if(t(i)){var u="function"==typeof i.valueOf?i.valueOf():i;i=t(u)?u+"":u}if("string"!=typeof i)return 0===i?i:+i;i=e(i);var l=n.test(i);return l||s.test(i)?o(i.slice(2),l?2:8):a.test(i)?NaN:+i}}(),a=Math.max,n=Math.min;return q=function(s,o,i){var u,l,d,c,m,f,p=0,v=!1,h=!1,g=!0;if("function"!=typeof s)throw new TypeError("Expected a function");function x(e){var t=u,r=l;return u=l=void 0,p=e,c=s.apply(r,t)}function N(e){var t=e-f;return void 0===f||t>=o||t<0||h&&e-p>=d}function y(){var e=t();if(N(e))return b(e);m=setTimeout(y,function(e){var t=o-(e-f);return h?n(t,d-(e-p)):t}(e))}function b(e){return m=void 0,g&&u?x(e):(u=l=void 0,c)}function j(){var e=t(),r=N(e);if(u=arguments,l=this,f=e,r){if(void 0===m)return function(e){return p=e,m=setTimeout(y,o),v?x(e):c}(f);if(h)return clearTimeout(m),m=setTimeout(y,o),x(f)}return void 0===m&&(m=setTimeout(y,o)),c}return o=r(o)||0,e(i)&&(v=!!i.leading,d=(h="maxWait"in i)?a(r(i.maxWait)||0,o):d,g="trailing"in i?!!i.trailing:g),j.cancel=function(){void 0!==m&&clearTimeout(m),p=0,u=f=l=m=void 0},j.flush=function(){return void 0===m?c:b(t())},j}}()),V={GROUP:{FIRST:{A:25,B:23,C:21},SECOND:{A:22,B:20,C:18},THIRD:{A:20,B:18,C:16}},SINGLE:{FIRST:{A:10,B:8,C:6},SECOND:{A:8,B:6,C:4},THIRD:{A:6,B:4,C:2}},GENERAL:{FIRST:{A:15,B:13,C:11},SECOND:{A:13,B:11,C:9},THIRD:{A:11,B:9,C:7}}},X=({message:t,onClose:r})=>t?e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-4 rounded",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{className:"h-5 w-5 text-red-400 mr-2"}),e.jsx("p",{className:"text-red-700",children:t}),e.jsx("button",{onClick:r,className:"ml-auto text-red-400 hover:text-red-500",children:"Ã—"})]})}):null,Q=()=>{var t;const{addResult:r,results:o}=i(),{state:l}=a(),h=n(),[g,x]=s.useState({studentName:"",programName:"",teamName:"",category:"",stage:"",prize:"",grade:"",points:""}),[N,y]=s.useState(""),[b,j]=s.useState([]),[w,A]=s.useState(!1);s.useEffect((()=>{(null==l?void 0:l.result)&&x(l.result)}),[l]);const S=s.useMemo((()=>[{name:"teamName",icon:e.jsx(p,{className:"w-5 h-5 text-gray-400"}),options:["ALEXANDRIA","SHATIBIYA","MADIYA","SHAMIYA","IJAZIYYA","KAZIMIYYA"]},{name:"category",icon:e.jsx(v,{className:"w-5 h-5 text-gray-400"}),options:["SINGLE","GROUP","GENERAL"]},{name:"stage",icon:e.jsx(d,{className:"w-5 h-5 text-gray-400"}),options:["STAGE","NON-STAGE"]},{name:"prize",icon:e.jsx(c,{className:"w-5 h-5 text-gray-400"}),options:["FIRST","SECOND","THIRD"]},{name:"grade",icon:e.jsx(d,{className:"w-5 h-5 text-gray-400"}),options:["A","B","C"]}]),[]);s.useEffect((()=>{const e=((e,t,r)=>{var a,n;return e&&t&&r&&(null==(n=null==(a=V[e])?void 0:a[t])?void 0:n[r])||""})(g.category,g.prize,g.grade).toString();e!==g.points&&x((t=>({...t,points:e})))}),[g.category,g.prize,g.grade]),s.useEffect((()=>{const e=null==o?void 0:o.slice(-5).map((({studentName:e,programName:t,teamName:r})=>({studentName:e,programName:t,teamName:r})));j(e||[])}),[o]);const k=s.useCallback((e=>null==o?void 0:o.some((t=>{var r;return t.studentName===e.studentName&&t.programName===e.programName&&t.prize===e.prize&&t._id!==(null==(r=null==l?void 0:l.result)?void 0:r._id)}))),[o,null==(t=null==l?void 0:l.result)?void 0:t._id]),C=s.useCallback(K(((e,t)=>{x((r=>{const a={...r,[e]:t};if("studentName"===e){const e=b.find((e=>e.studentName===t));if(e)return{...a,teamName:e.teamName,programName:e.programName}}return a}))}),300),[b]);return e.jsx("div",{className:"min-h-screen px-4 py-8 sm:px-6 md:px-12",children:e.jsxs("div",{className:"max-w-lg mx-auto bg-white/40 dark:bg-transparent dark:text-gray-400 shadow-lg dark:shadow-none rounded-lg p-6 md:p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(m,{className:"w-12 h-12 mx-auto text-blue-500 dark:text-blue-400",strokeWidth:1.5}),e.jsx("h2",{className:"text-2xl font-bold text-gray-700 dark:text-white mt-2",children:(null==l?void 0:l.result)?"Edit Result":"Add Result"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Manage and submit student results"})]}),e.jsx(X,{message:N,onClose:()=>y("")}),e.jsxs("form",{onSubmit:async e=>{var t,a;if(e.preventDefault(),!w){A(!0),y("");try{if(k(g))return y("A result with these details already exists"),void A(!1);(null==l?void 0:l.result)?await r({...g,_id:l.result._id},!0):await r(g),h("/cart")}catch(n){y((null==(a=null==(t=n.response)?void 0:t.data)?void 0:a.message)||"Error submitting form")}finally{A(!1)}}},className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(u,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",name:"studentName",list:"recentStudents",placeholder:"Student Name",value:g.studentName,onChange:e=>C("studentName",e.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"}),e.jsx("datalist",{id:"recentStudents",children:b.map(((t,r)=>e.jsx("option",{value:t.studentName},r)))})]}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",name:"programName",placeholder:"Program Name",value:g.programName,onChange:e=>C("programName",e.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),S.map((t=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-3",children:t.icon}),e.jsxs("select",{name:t.name,value:g[t.name],onChange:e=>C(t.name,e.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none appearance-none",children:[e.jsx("option",{value:"",children:`Select ${t.name.charAt(0).toUpperCase()+t.name.slice(1)}`}),t.options.map((t=>e.jsx("option",{value:t,children:t},t)))]})]},t.name))),e.jsxs("div",{className:"relative",children:[e.jsx(d,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",name:"points",placeholder:"Points",value:g.points,readOnly:!0,className:"w-full pl-10 pr-4 py-3 border dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none bg-gray-50"})]}),e.jsx("button",{type:"submit",disabled:w,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-md shadow-md transition duration-300 ease-in-out transform hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-blue-400 "+(w?"opacity-50 cursor-not-allowed":""),children:w?"Submitting...":(null==l?void 0:l.result)?"Update Result":"Add Result"})]})]})})},ee=()=>e.jsx("section",{children:e.jsx(Q,{})});export{ee as default};
