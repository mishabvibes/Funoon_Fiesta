import{c as i,a as N,r as o,u as v,j as e}from"./index-DM-f00sk.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=i("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=i("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=i("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=i("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=i("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),D=({isOpen:a,onClose:l,onConfirm:n,itemName:r})=>a?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-4 text-red-500",children:e.jsx(R,{className:"w-full h-full"})}),e.jsxs("h2",{className:"text-xl font-bold mb-2 text-gray-800 dark:text-white",children:["Delete ",r,"?"]}),e.jsxs("div",{className:"flex justify-end space-x-4 mt-4",children:[e.jsx("button",{onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-md hover:bg-red-600",children:"Delete"})]})]})})})}):null,d=({label:a,value:l})=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:a}),e.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-200",children:l})]}),M=({result:a,onDelete:l,onEdit:n,isDeleting:r})=>e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all duration-300 ${r?"opacity-50":""}`,children:[e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white truncate",children:a.programName}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>n(a),disabled:r,className:"p-2 text-gray-600 hover:text-blue-500 dark:text-gray-400 dark:hover:text-blue-400 transition-colors",children:e.jsx(w,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>l(a._id),disabled:r,className:"p-2 text-gray-600 hover:text-red-500 dark:text-gray-400 dark:hover:text-red-400 transition-colors",children:e.jsx(S,{className:"w-4 h-4"})})]})]})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{label:"Student",value:a.studentName}),e.jsx(d,{label:"Prize",value:a.prize}),e.jsx(d,{label:"Team",value:a.teamName}),e.jsx(d,{label:"Category",value:a.category}),e.jsx(d,{label:"Stage",value:a.stage}),a.grade&&e.jsx(d,{label:"Grade",value:a.grade}),e.jsx(d,{label:"Points",value:a.points})]})})]}),I=()=>{const{results:a,deleteResult:l,refreshResults:n}=N(),[r,y]=o.useState(""),[x,m]=o.useState({isOpen:!1,resultId:null,programName:""}),[p,g]=o.useState(new Set),h=v();o.useEffect(()=>{n()},[n]);const u=a.filter(t=>t.programName.toLowerCase().includes(r.toLowerCase())),b=t=>h("/addresult",{state:{result:t}}),j=t=>{const s=a.find(c=>c._id===t);m({isOpen:!0,resultId:t,programName:(s==null?void 0:s.programName)||"Result"})},f=async()=>{const{resultId:t}=x;if(m({isOpen:!1,resultId:null,programName:""}),t)try{g(s=>new Set([...s,t])),await l(t)}catch(s){console.error("Delete failed:",s)}finally{g(s=>{const c=new Set(s);return c.delete(t),c})}};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(D,{isOpen:x.isOpen,onClose:()=>m({isOpen:!1,resultId:null,programName:""}),onConfirm:f,itemName:x.programName}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Results Dashboard"}),e.jsx("button",{onClick:()=>h("/addresult"),className:"inline-flex items-center px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Add New Result"})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(C,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search programs...",value:r,onChange:t=>y(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-600 focus:border-transparent"})]}),e.jsxs("button",{className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors inline-flex items-center",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Filters"]})]})]}),u.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(t=>e.jsx(M,{result:t,onDelete:j,onEdit:b,isDeleting:p.has(t._id)},t._id))}):e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-center",children:"No results found. Try adjusting your search criteria or add a new result."})})]})},T=()=>e.jsx("section",{children:e.jsx(I,{})});export{T as default};
